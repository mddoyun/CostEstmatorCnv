# BOQ 상세견적 단가 표시 버그 수정

**날짜**: 2025-10-30
**작업자**: Claude Code

## 문제 상황

상세견적(DD) 탭의 집계표에서 단가 정보(합계단가, 재료비단가, 노무비단가, 경비단가)가 '-'로 표시되는 문제가 발생했습니다. 하위 산출항목 목록에서는 정상적으로 표시되었습니다.

## 원인 분석

`boq_detailed_estimation_handlers.js`의 `renderBoqTable` 함수에서 동적 필드를 렌더링할 때:

```javascript
// 문제 코드
if (col.isDynamic && item.display_values) {
    cellContent = item.display_values[col.id];
} else {
    cellContent = item[col.id];
}
```

- 단가 컬럼들이 `isDynamic: true`로 설정됨
- `display_values` 객체가 있으면 무조건 거기서만 값을 찾으려고 함
- 서버는 단가 데이터를 직접 속성으로 반환하므로 값을 찾지 못함

## 해결 방법

Fallback 로직을 추가하여 `display_values`에 값이 없으면 `item` 객체에서 직접 가져오도록 수정:

```javascript
// 수정된 코드
if (col.isDynamic && item.display_values && item.display_values[col.id] !== undefined) {
    cellContent = item.display_values[col.id];
} else {
    cellContent = item[col.id];
}
```

### 변경된 파일

- `connections/static/connections/boq_detailed_estimation_handlers.js:1631`

## 결과

- 집계표에서 단가 정보가 정상적으로 표시됨
- 하위 산출항목 목록도 계속 정상 작동
- 동적 필드와 정적 필드 모두 올바르게 렌더링됨

## 커밋

- Commit: d3a981a
- 파일: 1개 변경 (2 insertions, 2 deletions)
