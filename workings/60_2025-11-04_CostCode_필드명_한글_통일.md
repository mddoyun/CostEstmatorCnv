# 2025-11-04: CostCode í•„ë“œëª… í•œê¸€ í†µì¼

## ì‘ì—… ê°œìš”

ê³µì‚¬ì½”ë“œ(CostCode) í•„ë“œëª…ì„ ê³µì‚¬ì½”ë“œ ê´€ë¦¬ íƒ­ì˜ í…Œì´ë¸” í—¤ë”ì™€ ë™ì¼í•œ í•œê¸€ í˜•ì‹ìœ¼ë¡œ í†µì¼í–ˆìŠµë‹ˆë‹¤.
ëª¨ë“  íƒ­(ì½”ìŠ¤íŠ¸ì•„ì´í…œ, ìƒì„¸ê²¬ì  DD, ê°œì‚°ê²¬ì  SD)ì—ì„œ `CostCode.{í•œê¸€ëª…}` í˜•ì‹ì„ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

## ë³€ê²½ ì‚¬í•­

### 1. ê³µì‚¬ì½”ë“œ ê´€ë¦¬ íƒ­ í—¤ë” í™•ì¸

**íŒŒì¼**: `connections/static/connections/cost_code_management_handlers.js` (lines 56-68)

**í…Œì´ë¸” í—¤ë”**:
- ì½”ë“œ
- ì´ë¦„
- ì„¤ëª…
- ë‚´ì—­ì½”ë“œ
- ê³µì •
- í’ˆëª…
- ê·œê²©
- ë‹¨ìœ„
- ë¹„ê³ 
- AIê°œëµê²¬ì 
- ìƒì„¸ê²¬ì 

### 2. CostCode ëª¨ë¸ í•„ë“œ ë§¤í•‘

**íŒŒì¼**: `connections/models.py` (lines 46-65)

| ëª¨ë¸ í•„ë“œ | í…Œì´ë¸” í—¤ë” | ìƒˆ í•„ë“œëª… í˜•ì‹ |
|----------|-----------|--------------|
| `code` | ì½”ë“œ | `CostCode.ì½”ë“œ` |
| `name` | ì´ë¦„ | `CostCode.ì´ë¦„` |
| `description` | ì„¤ëª… | `CostCode.ì„¤ëª…` |
| `detail_code` | ë‚´ì—­ì½”ë“œ | `CostCode.ë‚´ì—­ì½”ë“œ` |
| `category` | ê³µì • | `CostCode.ê³µì •` |
| `product_name` | í’ˆëª… | `CostCode.í’ˆëª…` |
| `spec` | ê·œê²© | `CostCode.ê·œê²©` |
| `unit` | ë‹¨ìœ„ | `CostCode.ë‹¨ìœ„` |
| `note` | ë¹„ê³  | `CostCode.ë¹„ê³ ` |
| `ai_sd_enabled` | AIê°œëµê²¬ì  | `CostCode.AIê°œëµê²¬ì ` |
| `dd_enabled` | ìƒì„¸ê²¬ì  | `CostCode.ìƒì„¸ê²¬ì ` |

### 3. ë°±ì—”ë“œ API ì—…ë°ì´íŠ¸

**íŒŒì¼**: `connections/views.py` (lines 2409-2423)

**ë³€ê²½ ë‚´ìš©**:
```python
# ì´ì „
add_field('cost_code__code', 'ê³µì‚¬ì½”ë“œ - ì½”ë“œ')
add_field('cost_code__name', 'ê³µì‚¬ì½”ë“œ - ì´ë¦„')
add_field('cost_code__spec', 'ê³µì‚¬ì½”ë“œ - ê·œê²©')
add_field('cost_code__unit', 'ê³µì‚¬ì½”ë“œ - ë‹¨ìœ„')
add_field('cost_code__category', 'ê³µì‚¬ì½”ë“œ - ê³µì •')
add_field('cost_code__detail_code', 'ê³µì‚¬ì½”ë“œ - ë‚´ì—­ì½”ë“œ')
add_field('cost_code__product_name', 'ê³µì‚¬ì½”ë“œ - í’ˆëª…')
add_field('cost_code__note', 'ê³µì‚¬ì½”ë“œ - ë¹„ê³ ')

# ë³€ê²½ í›„
add_field('cost_code__code', 'CostCode.ì½”ë“œ')
add_field('cost_code__name', 'CostCode.ì´ë¦„')
add_field('cost_code__description', 'CostCode.ì„¤ëª…')
add_field('cost_code__detail_code', 'CostCode.ë‚´ì—­ì½”ë“œ')
add_field('cost_code__category', 'CostCode.ê³µì •')
add_field('cost_code__product_name', 'CostCode.í’ˆëª…')
add_field('cost_code__spec', 'CostCode.ê·œê²©')
add_field('cost_code__unit', 'CostCode.ë‹¨ìœ„')
add_field('cost_code__note', 'CostCode.ë¹„ê³ ')
add_field('cost_code__ai_sd_enabled', 'CostCode.AIê°œëµê²¬ì ')
add_field('cost_code__dd_enabled', 'CostCode.ìƒì„¸ê²¬ì ')
```

**ì¶”ê°€ëœ í•„ë“œ**:
- `description` (ì„¤ëª…)
- `ai_sd_enabled` (AIê°œëµê²¬ì )
- `dd_enabled` (ìƒì„¸ê²¬ì )

### 4. ì½”ìŠ¤íŠ¸ì•„ì´í…œ íƒ­ í•„ë“œ ì„ íƒ ì—…ë°ì´íŠ¸

**íŒŒì¼**: `connections/static/connections/cost_item_manager.js` (lines 1180-1193)

**ë³€ê²½ ë‚´ìš©**:
```javascript
// ì´ì „
const costCodeFields = [
    { key: 'cost_code_name', label: 'CostCode.name', section: 'CostCode' },
    { key: 'cost_code', label: 'CostCode.code', section: 'CostCode' },
    { key: 'cost_code_detail_code', label: 'CostCode.detail_code', section: 'CostCode' },
    { key: 'cost_code_unit', label: 'CostCode.unit', section: 'CostCode' },
    { key: 'cost_code_note', label: 'CostCode.note', section: 'CostCode' }
];

// ë³€ê²½ í›„
const costCodeFields = [
    { key: 'cost_code', label: 'CostCode.ì½”ë“œ', section: 'CostCode' },
    { key: 'cost_code_name', label: 'CostCode.ì´ë¦„', section: 'CostCode' },
    { key: 'cost_code_description', label: 'CostCode.ì„¤ëª…', section: 'CostCode' },
    { key: 'cost_code_detail_code', label: 'CostCode.ë‚´ì—­ì½”ë“œ', section: 'CostCode' },
    { key: 'cost_code_category', label: 'CostCode.ê³µì •', section: 'CostCode' },
    { key: 'cost_code_product_name', label: 'CostCode.í’ˆëª…', section: 'CostCode' },
    { key: 'cost_code_spec', label: 'CostCode.ê·œê²©', section: 'CostCode' },
    { key: 'cost_code_unit', label: 'CostCode.ë‹¨ìœ„', section: 'CostCode' },
    { key: 'cost_code_note', label: 'CostCode.ë¹„ê³ ', section: 'CostCode' },
    { key: 'cost_code_ai_sd_enabled', label: 'CostCode.AIê°œëµê²¬ì ', section: 'CostCode' },
    { key: 'cost_code_dd_enabled', label: 'CostCode.ìƒì„¸ê²¬ì ', section: 'CostCode' }
];
```

### 5. CostItem ì»¨í…ìŠ¤íŠ¸ ë¹Œë” ì—…ë°ì´íŠ¸

**íŒŒì¼**: `connections/static/connections/cost_item_manager.js` (lines 2031-2045)

**ë³€ê²½ ë‚´ìš©**:
```javascript
// ì´ì „
if (costCode) {
    context['cost_code_code'] = costCode.code;
    context['cost_code_name'] = costCode.name;
    context['cost_code_detail_code'] = costCode.detail_code;
}

// ë³€ê²½ í›„
if (costCode) {
    context['cost_code'] = costCode.code;
    context['cost_code_name'] = costCode.name;
    context['cost_code_description'] = costCode.description;
    context['cost_code_detail_code'] = costCode.detail_code;
    context['cost_code_category'] = costCode.category;
    context['cost_code_product_name'] = costCode.product_name;
    context['cost_code_spec'] = costCode.spec;
    context['cost_code_unit'] = costCode.unit;
    context['cost_code_note'] = costCode.note;
    context['cost_code_ai_sd_enabled'] = costCode.ai_sd_enabled;
    context['cost_code_dd_enabled'] = costCode.dd_enabled;
}
```

## í•„ë“œëª… í˜•ì‹ ìµœì¢… ì •ë¦¬

### ì½”ìŠ¤íŠ¸ì•„ì´í…œ (CI) í•„ë“œ
- í˜•ì‹: `CI.{ì˜ë¬¸}`
- ì˜ˆì‹œ: `CI.id`, `CI.description`, `CI.quantity`

### ìˆ˜ëŸ‰ì‚°ì¶œë¶€ì¬ (QM) í•„ë“œ
- ê¸°ë³¸: `QM.{ì˜ë¬¸}`
- ì†ì„±: `QM.properties.{í•œê¸€}`
- ì˜ˆì‹œ: `QM.name`, `QM.properties.ì²´ì `

### ì¼ëŒë¶€í˜¸ (MM) í•„ë“œ
- ê¸°ë³¸: `MM.mark`
- ì†ì„±: `MM.properties.{í•œê¸€}`
- ì˜ˆì‹œ: `MM.properties.ì£¼ì² ê·¼ì¢…ë¥˜`

### BIM ì›ë³¸ ë°ì´í„° í•„ë“œ
- ê¸°ë³¸ ì†ì„±: `BIM.Attributes.{ì˜ë¬¸}`
- íŒŒë¼ë¯¸í„°: `BIM.Parameters.{í•œê¸€/ì˜ë¬¸}`
- íƒ€ì… íŒŒë¼ë¯¸í„°: `BIM.TypeParameters.{í•œê¸€/ì˜ë¬¸}`

### ê³µì‚¬ì½”ë“œ (CostCode) í•„ë“œ (ìƒˆë¡œ í†µì¼)
- í˜•ì‹: `CostCode.{í•œê¸€}`
- ì˜ˆì‹œ:
  - `CostCode.ì½”ë“œ`
  - `CostCode.ì´ë¦„`
  - `CostCode.ì„¤ëª…`
  - `CostCode.ë‚´ì—­ì½”ë“œ`
  - `CostCode.ê³µì •`
  - `CostCode.í’ˆëª…`
  - `CostCode.ê·œê²©`
  - `CostCode.ë‹¨ìœ„`
  - `CostCode.ë¹„ê³ `
  - `CostCode.AIê°œëµê²¬ì `
  - `CostCode.ìƒì„¸ê²¬ì `

## ìë™ ì ìš©ë˜ëŠ” íƒ­

1. **ì‘ì—… > ì½”ìŠ¤íŠ¸ì•„ì´í…œ** íƒ­
   - ì¢Œì¸¡ í•˜ë‹¨ "í•„ë“œ ì„ íƒ" íƒ­ì˜ "ğŸ’° ê³µì‚¬ì½”ë“œ ì†ì„± (CostCode)" ì„¹ì…˜
   - í•„ë“œ ì„ íƒ ì²´í¬ë°•ìŠ¤ ë ˆì´ë¸”

2. **ê²¬ì  > ìƒì„¸ê²¬ì (DD)** íƒ­
   - ì¢Œì¸¡ "í•„ë“œ ì„ íƒ" íƒ­ì˜ í•„ë“œ ëª©ë¡
   - ê·¸ë£¹í•‘ ë“œë¡­ë‹¤ìš´ ì˜µì…˜

3. **ê²¬ì  > ê°œì‚°ê²¬ì (SD)** íƒ­
   - ê·¸ë£¹í•‘ ë“œë¡­ë‹¤ìš´ ì˜µì…˜

## ì¥ì 

1. **ì‚¬ìš©ì ì¹œí™”ì„±**: ì˜ë¬¸ í•„ë“œëª… ëŒ€ì‹  í•œê¸€ ë ˆì´ë¸” ì‚¬ìš©ìœ¼ë¡œ ì§ê´€ì  ì´í•´ í–¥ìƒ
2. **ì¼ê´€ì„±**: ê³µì‚¬ì½”ë“œ ê´€ë¦¬ íƒ­ì˜ í—¤ë”ëª…ê³¼ ë™ì¼í•˜ì—¬ í˜¼ë™ ë°©ì§€
3. **ì™„ì „ì„±**: ëª¨ë“  CostCode í•„ë“œ(11ê°œ)ê°€ í•„ë“œ ì„ íƒì— í‘œì‹œë¨
4. **ìœ ì§€ë³´ìˆ˜**: í•œ ê³³(ë°±ì—”ë“œ API)ì—ì„œ í•„ë“œëª… ê´€ë¦¬

## í…ŒìŠ¤íŠ¸ ë°©ë²•

1. í”„ë¡œì íŠ¸ ì„ íƒ
2. **ê´€ë¦¬ > ê³µì‚¬ì½”ë“œê´€ë¦¬** íƒ­ì—ì„œ í…Œì´ë¸” í—¤ë” í™•ì¸
3. **ì‘ì—… > ì½”ìŠ¤íŠ¸ì•„ì´í…œ** íƒ­ìœ¼ë¡œ ì´ë™
   - ì¢Œì¸¡ í•˜ë‹¨ "í•„ë“œ ì„ íƒ" íƒ­ í´ë¦­
   - "ğŸ’° ê³µì‚¬ì½”ë“œ ì†ì„± (CostCode)" ì„¹ì…˜ì—ì„œ í•œê¸€ í•„ë“œëª… í™•ì¸
   - ì˜ˆ: `CostCode.ì½”ë“œ`, `CostCode.ì´ë¦„`, `CostCode.ë‚´ì—­ì½”ë“œ` ë“±
4. **ê²¬ì  > ìƒì„¸ê²¬ì (DD)** íƒ­ìœ¼ë¡œ ì´ë™
   - ì¢Œì¸¡ "í•„ë“œ ì„ íƒ" íƒ­ì—ì„œ `CostCode.{í•œê¸€}` í˜•ì‹ í•„ë“œ í™•ì¸
   - "ê·¸ë£¹í•‘ ì¶”ê°€" ë²„íŠ¼ í´ë¦­ í›„ ë“œë¡­ë‹¤ìš´ì—ì„œ í™•ì¸
5. **ê²¬ì  > ê°œì‚°ê²¬ì (SD)** íƒ­ìœ¼ë¡œ ì´ë™
   - "ê·¸ë£¹í•‘ ì¶”ê°€" ë²„íŠ¼ í´ë¦­ í›„ ë“œë¡­ë‹¤ìš´ì—ì„œ `CostCode.{í•œê¸€}` í˜•ì‹ í™•ì¸

## ê´€ë ¨ íŒŒì¼

- `connections/models.py`: CostCode ëª¨ë¸ ì •ì˜ (lines 46-65)
- `connections/views.py`: BOQ API í•„ë“œ ëª©ë¡ ìƒì„± (lines 2409-2423)
- `connections/static/connections/cost_code_management_handlers.js`: ê³µì‚¬ì½”ë“œ ê´€ë¦¬ íƒ­ (lines 56-68)
- `connections/static/connections/cost_item_manager.js`: ì½”ìŠ¤íŠ¸ì•„ì´í…œ í•„ë“œ ì„ íƒ (lines 1180-1193, 2031-2045)
- `connections/static/connections/boq_detailed_estimation_handlers.js`: DD íƒ­ (ìë™ ì ìš©)
- `connections/static/connections/schematic_estimation_handlers.js`: SD íƒ­ (ìë™ ì ìš©)

## ì£¼ì˜ì‚¬í•­

- ë‚´ë¶€ `value` ê°’ì€ ë³€ê²½ ì—†ìŒ (ì˜ˆ: `cost_code__code`, `cost_code__name`)
- ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” `label`ë§Œ í•œê¸€ë¡œ ë³€ê²½
- ê¸°ì¡´ ì €ì¥ëœ ê·¸ë£¹í•‘ ì„¤ì •ì€ ì˜í–¥ ì—†ìŒ (ë‚´ë¶€ value ê¸°ë°˜ ì €ì¥)
- ë°±ì—”ë“œ APIê°€ í•œ ë²ˆë§Œ í˜¸ì¶œë˜ì–´ ëª¨ë“  íƒ­ì— ë™ì¼í•˜ê²Œ ì ìš©ë¨
