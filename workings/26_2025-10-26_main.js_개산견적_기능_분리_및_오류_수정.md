# 작업 요약: `main.js` 개산견적(SD) 기능 분리 및 참조 오류 수정

## 1. 개요

`main.js` 파일의 크기가 너무 커서 유지보수가 어려운 문제를 해결하기 위해, 파일 내의 '개산견적(Schematic Estimation)' 관련 기능들을 별도의 JavaScript 파일로 분리하는 작업을 진행했습니다.

## 2. 작업 진행 내용

1.  **기능 분리:**
    *   `main.js` 파일에서 개산견적(SD) 탭의 이벤트 리스너와 관련 핸들러 함수들을 식별했습니다.
    *   `connections/static/connections/schematic_estimation_handlers.js`라는 새 파일을 생성했습니다.
    *   식별된 모든 개산견적 관련 함수들을 새 파일로 추출하여 옮겼습니다.

2.  **참조 오류 발생:**
    *   사용자가 `main.js`에서 추출된 코드를 직접 삭제한 후, 브라우저 콘솔에서 `Uncaught ReferenceError: setupSchematicEstimationListeners is not defined` 오류가 발생하는 것을 확인했습니다.
    *   오류의 원인은 `main.js`에서 함수 정의가 사라졌음에도 불구하고, HTML 파일이 새로 생성된 `schematic_estimation_handlers.js` 파일을 로드하지 않아 함수를 찾을 수 없었기 때문입니다.

3.  **오류 수정:**
    *   메인 템플릿 파일인 `connections/templates/revit_control.html`을 수정했습니다.
    *   `main.js` 스크립트 태그가 로드되기 이전에 `schematic_estimation_handlers.js` 파일을 로드하도록 `<script>` 태그를 추가했습니다.
    *   이 조치를 통해 `main.js`의 `DOMContentLoaded` 이벤트 리스너가 `setupSchematicEstimationListeners` 함수를 호출하기 전에 함수가 정의되도록 하여 참조 오류를 해결했습니다.

## 3. 결과

*   `main.js`의 코드 복잡성이 감소했으며, 개산견적 관련 코드가 `schematic_estimation_handlers.js` 파일로 성공적으로 분리되었습니다.
*   `revit_control.html` 파일 수정을 통해 스크립트 로드 순서를 바로잡아 발생했던 참조 오류를 해결했습니다.
